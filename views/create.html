<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> PlanMyWeek</title>
        <link rel="icon" type="image/png" href="./images/ant-vector.png">
        <link rel="stylesheet" href="./stylesheet.css"/>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
        <script src="jquery-3.7.1.min.js"></script>
        <script src="../app/app.js"></script>
        <script src="../app/home.js"></script>
        <script src="../app/services/db.js"></script>

    </head>

    <body>
        <header class="header">
            <h1> PlanMyWeek </h1>
            <div class="logo">
                <img src="./images/ant-vector.png" class="logo-wrapped">
            </div>
            <nav class="menu-items">
                <ul class="menu-list">
                    <li><a href="index.html"> Home </a></li>
                    <li><a href="about-us.html"> About Us </a></li>
                    <li><a href="signin.html"> Sign in/Sign up</a></li>
                </ul>
            </nav>
        </header>
        
        <h1>
            Create your own schedule - hassle free!
        </h1>
        <div class="about-us-img">
            <img src="./images/cute-smiling-brain.png" class="cute-brain-wrapped">
        </div>
        <p>
            For those busybodies who want to manually make their own schedule - you go boss!
        </p>
<!--insert pre-chosen buttons that are draggable--> 
        <p></p>

        <!-- <form>
            <div>
              <label for="name">Name</label>
              <input id="name" type="text" />
            </div>
            <div>
              <label for="email">Email</label>
              <input id="email" type="email" />
            </div>
            <div>
              <label for="comp">Favorite CSS Compiler</label>
              <select id="comp">
                <option value="sass">Sass</option>
                <option value="less">Less</option>
                <option value="stylus">Stylus</option>
                <option value="postcss">PostCSS</option>
                <option value="other">Other</option>
              </select>
            </div>
            <div>
              <fieldset>
                <legend>Are you familiar with CSS Grid?</legend>
                <input type="radio" name="grid" id="yes" value="yes" />
                <label for="yes">Yes</label>
                <input type="radio" name="grid" id="no" value="no" />
                <label for="no">No</label>
              </fieldset>
            </div>
            <div class="full-width">
              <label for="message">Message</label>
              <textarea id="message"></textarea>
            </div>
            <div class="full-width">
              <input type="checkbox" id="newsletter" />
              <label for="newsletter">Receive our newsletter?</label>
            </div>
            <div class="full-width">
              <button type="submit">Send Response</button>
              <button type="reset">Clear Form</button>
            </div>
        </form> -->

        <form id="work-schedule-form" method="POST" action="/views/create.html">
            <label for="date">Date:</label>
            <input type="date" id="date" name="date" required>
            
            <label for="startTime">Start Time:</label>
            <input type="time" id="starTTime" name="startTime" required>
            
            <label for="endTime">End Time:</label>
            <input type="time" id="endTime" name="endTime" required>
            
            <label for="DayOfWeek">Day of Week:</label>
            <input type="text" id="DayOfWeek" name="DayOfWeek" required>
            
            <button type="submit">Add Work Schedule</button>
        </form>

        <form id="goal-form" method="POST" action="/views/create.html">
            <label for="goalName">Goal Name:</label>
            <input type="text" id="goalName" name="goalName" required>
            
            <label for="description">Description:</label>
            <input type="text" id="description" name="description" required>
            
            <label for="start-date">Start Date:</label>
            <input type="date" id="start-date" name="start_date" required>
            
            <label for="end-date">End Date:</label>
            <input type="date" id="end-date" name="end_date" required>
            
            <label for="frequency">Frequency:</label>
            <select id="frequency" name="frequency" required>
                <option value="daily">Daily</option>
                <option value="twice"> Twice a week</option>
                <option value="thrice"> Three times a week</option>
                <option value="four"> Four times a week</option>
                <option value="five"> Five times a week</option>
                <option value="six"> Six times a week</option>
                <option value="weekly">Weekly</option>
            </select>
            
            <label for="duration">Duration (HH:MM:SS):</label>
            <input type="time" id="duration" name="duration" required>
            
            <button type="submit">Add Goal</button>
        </form>

        <form id="task-form" method="POST" action="/views/create.html">
            <label for="taskName">Task Name:</label>
            <input type="text" id="taskName" name="taskName" required>
            
            <label for="description">Description:</label>
            <input type="text" id="description" name="description" required>
            
            <label for="deadline">Deadline:</label>
            <input type="date" id="deadline" name="deadline" required>
            
            <button type="submit">Add Task</button>
        </form>

        <div id="calendar-box">
            <div class="day" id="monday">Monday</div>
            <div class="day" id="tuesday">Tuesday</div>
            <div class="day" id="wednesday">Wednesday</div>
            <div class="day" id="thursday">Thursday</div>
            <div class="day" id="friday">Friday</div>
            <div class="day" id="saturday">Saturday</div>
            <div class="day" id="sunday">Sunday</div>
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', function() {
            const userID = 1; // Replace with dynamic user ID based on login/session
            fetch(`fetch_schedule.php?userID=${userID}`)
                .then(response => response.json())
                .then(data => {
                    const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];

                    days.forEach(day => {
                        const dayElement = document.getElementById(day);
                        dayElement.innerHTML = `<h4>${day.charAt(0).toUpperCase() + day.slice(1)}</h4>`;

                        // Display schedules
                        const daySchedules = data.schedules.filter(schedule => {
                            const scheduleDate = new Date(schedule.date);
                            return scheduleDate.toLocaleDateString('en-UK', { weekday: 'long' }).toLowerCase() === day;
                        });
                        daySchedules.forEach(schedule => {
                            const scheduleElement = document.createElement('div');
                            scheduleElement.className = 'ScheduleName';
                            scheduleElement.innerText = `${schedule.startTime} - ${schedule.endTime}: ${schedule.DayOfWeek}`;
                            dayElement.appendChild(scheduleElement);
                        });

                        // Display goals (assuming they are displayed daily if they are active during the week)
                        const dayGoals = data.goals.filter(goals => {
                            const startDate = new Date(goals.startDate);
                            const endDate = new Date(goals.endDate);
                            const currentDay = new Date(day);

                            return currentDay >= startDate && currentDay <= endDate;
                        });
                        dayGoals.forEach(goals => {
                            const goalElement = document.createElement('div');
                            goalElement.className = 'goal-item';
                            goalElement.innerText = `Goal: ${goals.goalName} (${goals.description})`;
                            dayElement.appendChild(goalElement);
                        });

                        // Display tasks
                        const dayTasks = data.tasks.filter(task => {
                            const taskDate = new Date(task.deadline);
                            return taskDate.toLocaleDateString('en-UK', { weekday: 'long' }).toLowerCase() === day;
                        });
                        dayTasks.forEach(task => {
                            const taskElement = document.createElement('div');
                            taskElement.className = 'taskName';
                            taskElement.innerText = `Task: ${task.taskName} (Description: ${task.description})`;
                            dayElement.appendChild(taskElement);
                        });
                    });
                })
                .catch(error => console.error('Error fetching data:', error));
        });
        </script>

        <!-- <div id="goals-box">
            <h3>Goals</h3>
            <ul id="goals-list"></ul>
        </div>
        
        <div id="tasks-box">
            <h3>Tasks</h3>
            <ul id="tasks-list"></ul>
        </div> -->

        <footer>
            <div class="footer-image">
                <img src="./images/ant-trail-headerfooter.png" alt="ant" class="ant-wrapped"><img src="./images/ant-trail-headerfooter.png" alt="ant" class="ant-wrapped"><img src="./images/ant-trail-headerfooter.png" alt="ant" class="ant-wrapped"><img src="./images/ant-trail-headerfooter.png" alt="ant" class="ant-wrapped"><img src="./images/ant-trail-headerfooter.png" alt="ant" class="ant-wrapped">
            </div>
            <h3>Quick Links</h3>
                <div class="footer-links">
                    <a href="./index.html" style="color: #00215E ;">Home | </a><a href="./signin.html" style="color: #00215E;">Sign In | </a><a href="./about-us.html" style="color: #00215E;">About Us | </a><a href="./contact-us.html" style="color: #00215E;">Contact Us</a>
                </div>
            <p></p>
            <div class="footer-bottom">
                &copy; 2024 PlanMyWeek | Designed by Samira Hamadneh
            </div>
        </footer>
    </body>
</html>